{% extends "pretixcontrol/event/base.html" %}
{% load i18n %}
{% load bootstrap3 %}
{% load order_overview %}
{% block title %}{% trans "Data shredder" %}{% endblock %}
{% block content %}
    <h1>
        {% trans "Data shredder" %}
    </h1>
    <p>
        {% blocktrans trimmed %}
            This feature allows you to remove personal data from this event. You will first select what kind of data
            you want to shred, then you are able to download the affected data and after you confirmed the download,
            the data will be removed from the server's database. The data might still exist in backups for a limited
            period of time.
        {% endblocktrans %}
    </p>
    <div class="alert alert-warning">
        <span class="fa fa-w fa-legal"></span>
        <strong>
            {% blocktrans trimmed %}
                It is within your own responsibility to check if you are allowed to delete the affected data in your
                legislation, e.g. for reasons of taxation.
            {% endblocktrans %}
        </strong>
        <div class="clear"></div>
    </div>
    {% if constraints %}
        <div class="alert alert-danger">
            {{ constraints }}
        </div>
    {% else %}
        <form action="" method="post">
            <legend>{% trans "Data selection" %}</legend>
            {% csrf_token %}
            <div class="panel-group" id="payment_accordion">
                {% for ident, shredder in shredders.items %}
                    <div class="panel panel-default">
                        <label class="accordion-radio">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <input type="checkbox" name="shredder" value="{{ shredder.identifier }}">
                                    <strong>{{ shredder.verbose_name }}</strong>
                                </h4>
                            </div>
                        </label>
                        <div id="payment_{{ p.provider.identifier }}"
                                class="panel-collapse collapsed {% if selected == p.provider.identifier %}in{% endif %}">
                            <div class="panel-body">
                                {{ shredder.description|safe }}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <div class="form-group submit-group">
                <button type="submit" class="btn btn-primary btn-save">
                    {% trans "Continue" %}
                </button>
            </div>
        </form>
    {% endif %}
{% endblock %}
